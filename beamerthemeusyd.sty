% Insipired by Cameron Bracken's theme originally posted
% here: http://cameron.bracken.bz/beamer-template
% January 2009

% Modifications done by Martin Bjeldbak Madsen
% June 2014

% Adapted theme for University of Sydney.
% October 2015
\mode<presentation>

\usepackage[T1]{fontenc}
\usepackage{fontspec}
\usepackage{tikz}

\setsansfont[BoldFont = Tw Cen MT Bold]{Tw Cen MT}

\newcommand\sectiongraphic[1]{\def\insertsectiongraphic{#1}}

\AtBeginDocument{
  \DeclareSymbolFont{pureletters}{OT1}{cmr}{\mddefault}{it}
}
\usefonttheme[onlymath]{serif}

\useoutertheme[subsection=false,shadow]{miniframes}
\useinnertheme{default}

\setbeamertemplate{footline} % show slide number on all slides but the first
{%
  \ifnum\c@framenumber=1
  \else
    \begin{beamercolorbox}[wd=0.95\paperwidth,right,dp=2ex]{page number}
      \insertframenumber/\inserttotalframenumber
    \end{beamercolorbox}
  \fi%
  \begin{beamercolorbox}[colsep=1.25pt]{lower separation line foot}
  \end{beamercolorbox}
}


\setbeamerfont{title}{size=\Large,series=\bfseries}
\setbeamerfont{subtitle}{size=\large,series=\mdseries}

\setbeamerfont{presentby}{size=\footnotesize,series=\bfseries}
\setbeamerfont{author}{size=\footnotesize}
\setbeamerfont{institute}{size=\footnotesize}

\setbeamerfont{title like}{series=\bfseries}
\setbeamerfont{frametitle}{size=\Large,series=\bfseries}
\setbeamerfont{framesubtitle}{size=\Large,series=\bfseries}

\setbeamerfont{section in head/foot}{size=\tiny}
\setbeamerfont{section name}{series=\mdseries}
\setbeamerfont{section title}{size=\Large,series=\bfseries}

%\setbeamertemplate{navigation symbols}{} % hide bottom nav buttons
\setbeamercovered{transparent} % don't hide strip-teased bullet points

\definecolor{usydorange}{HTML}{E64626}   % USYD orange
\definecolor{usydblue}{HTML}{1F497D}     % USYD blue
\definecolor{usydcharcoal}{HTML}{424242} % USYD charcoal
\setbeamercolor{lower separation line head}{bg=usydorange}
\setbeamercolor{normal text}{fg=black,bg=white}
\setbeamercolor{alerted text}{fg=red}
\setbeamercolor{example text}{fg=black}
\setbeamercolor{structure}{fg=black}
\setbeamercolor{title}{fg=white}
\setbeamercolor{subtitle}{fg=black}
\setbeamercolor{title page}{fg=black,bg=usydorange}
\setbeamercolor{frametitle}{fg=usydorange}
\setbeamercolor{framesubtitle}{fg=black}
\setbeamercolor{section name}{fg=white}
\setbeamercolor{part title}{fg=white}

\setbeamercolor{palette tertiary}{fg=black,bg=usydcharcoal!25}
\setbeamercolor{palette quaternary}{fg=black,bg=black!10}

\setbeamersize{text margin left=0.75cm}

% Define a custom title page
\defbeamertemplate*{title page}{customized}[1][]
{
  \vspace{-2em}
  \vbox{}
  \vfill
  \begingroup
  \begin{minipage}{0.5\framewidth}
    % \centering
    \begin{beamercolorbox}[left,#1]{title}
      \usebeamerfont{title}\inserttitle\par%
      \ifx\insertsubtitle\@empty%
      \else%
        \vskip0.1em%
        {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
      \fi%     
    \end{beamercolorbox}%
    \vskip1em\par
    \begin{beamercolorbox}[left,#1]{author}
      {\usebeamerfont{presentby}Presented by}\\
      \usebeamerfont{author}\insertauthor\par
      \begin{beamercolorbox}[left,#1]{institute}
        \usebeamerfont{institute}\insertinstitute
      \end{beamercolorbox}
    \end{beamercolorbox}\vskip1em\par
    \begin{beamercolorbox}[left,#1]{date}
      \usebeamerfont{date}\insertdate
    \end{beamercolorbox}\vskip1em
    {\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic\par}
    \tikz[overlay,remember picture] \node[opacity=1, at=(current page.center), anchor=west] {
       \includegraphics[height=\paperheight,width=0.5\paperwidth]{images/titlebg}};
  \end{minipage}
  \endgroup
  \vfill
}

% Custom section separator page
\defbeamertemplate*{section page}{customized}[1][]
{
  \begingroup
    % \centering
    % {\usebeamerfont{section name}\usebeamercolor[fg]{section name}\sectionname~\insertsectionnumber}
    \begin{beamercolorbox}[left,#1]{part title}
      {\usebeamerfont{section name}\usebeamercolor[fg]{section name}\sectionname~\insertsectionnumber}\par
      \usebeamerfont{section title}\insertsection\par
    \end{beamercolorbox}
    \vskip3em\par
    {\usebeamercolor[fg]{section title}\insertsectiongraphic\par}
  \endgroup
}

% Automatically create section pages at each new section
% and use usydblue as the background colour.
\AtBeginSection{
  \begingroup
    \setbeamercolor{background canvas}{bg=usydblue}
    \setbeamercolor{lower separation line head}{bg=usydblue!125}
    \setbeamercolor{page number}{fg=white}
    \frame[c]{\sectionpage}
  \endgroup
}

\setbeamertemplate{itemize item}{\textbf{--}}

% Logo of USYD
\titlegraphic{
\def\svgwidth{0.25\framewidth}
\tikz[overlay,remember picture] \node[opacity=1, at=(current page.south west),
anchor=south west,outer xsep=1.5em, outer ysep=1em] {
  \input{images/usyd-logo.pdf_tex}
};
}

\sectiongraphic{
\def\svgwidth{0.25\framewidth}
\tikz[overlay,remember picture] \node[opacity=1, at=(current page.south west),
anchor=south west,outer xsep=1.5em, outer ysep=1em] {
  \input{images/usyd-logo-white.pdf_tex}
};
}

\mode<all>
